define(function(){function a(a,b,c){return a.sort(function(a,c){var d=parseInt(a[b],10),e=parseInt(c[b],10);return d<e?-1:d>e?1:0})}var b={sort:function(b){var c="",d=0,e=b.map(function(a){return{line:a}});return e=a(e,"line"),e.forEach(function(a){c+=a.line,c+="\n",d+=1}),{lines:c,length:d}},uniq:function(a){var b={},c=0,d="";return a.forEach(function(a){b[a]||(b[a]=!0,d+=a,d+="\n",c+=1)}),{lines:d,length:c}},dups:function(a){var b="",c=0,d={};return a.forEach(function(a){d[a]=+[d[a]]+1}),Object.keys(d).forEach(function(a){d[a]>1&&(b+=a,b+="\n",c+=1)}),{lines:b,length:c}},difference:function(a,b){var c="",d=0,e={},f;while((f=b.shift())!==undefined)e[f]=!0;while((f=a.shift())!==undefined)e[f]||(c+=f,c+="\n",d+=1);return{lines:c,length:d}},union:function(a,b){var c=b.concat(a);return{lines:c.join("\n"),length:c.length}},intersection:function(a,b){var c="",d=0,e={},f;while((f=a.shift())!==undefined)e[f]=!0;while((f=b.shift())!==undefined)e[f]===!0&&(e[f]=!1,c+=f,c+="\n",d+=1);return{lines:c,length:d}},symmetric:function(a,b){var c="",d=0,e={},f;while((f=a.shift())!==undefined)e[f]=+[e[f]]+1;while((f=b.shift())!==undefined)e[f]=+[e[f]]+1;var g=Object.keys(e);while(f=g.shift())e[f]===1&&(c+=f,c+="\n",d+=1);return{lines:c,length:d}},charge:function(a,b){return{lines:b.join("\n"),length:b.length}},grep:function(a,b){var c="",d=0,e={},f=b.map(function(a){return new RegExp(a,"i")});return a.forEach(function(a){var b;b=a;var e=f.some(function(a){return b!==(b=b.replace(a,"<b>$&</b>"))});e&&(c+=a,c+="\n",d+=1)}),{lines:c,length:d}}};return b})